'use strict';

<<<<<<< HEAD
var callBound = require('call-bind/callBound');
var hasSymbols = require('has-symbols')();
var hasToStringTag = hasSymbols && typeof Symbol.toStringTag === 'symbol';
var has;
var $exec;
=======
var hasSymbols = require('has-symbols')();
var hasToStringTag = hasSymbols && typeof Symbol.toStringTag === 'symbol';
var hasOwnProperty;
var regexExec;
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
var isRegexMarker;
var badStringifier;

if (hasToStringTag) {
<<<<<<< HEAD
	has = callBound('Object.prototype.hasOwnProperty');
	$exec = callBound('RegExp.prototype.exec');
=======
	hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);
	regexExec = Function.call.bind(RegExp.prototype.exec);
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
	isRegexMarker = {};

	var throwRegexMarker = function () {
		throw isRegexMarker;
	};
	badStringifier = {
		toString: throwRegexMarker,
		valueOf: throwRegexMarker
	};

	if (typeof Symbol.toPrimitive === 'symbol') {
		badStringifier[Symbol.toPrimitive] = throwRegexMarker;
	}
}

<<<<<<< HEAD
var $toString = callBound('Object.prototype.toString');
=======
var toStr = Object.prototype.toString;
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
var gOPD = Object.getOwnPropertyDescriptor;
var regexClass = '[object RegExp]';

module.exports = hasToStringTag
	// eslint-disable-next-line consistent-return
	? function isRegex(value) {
		if (!value || typeof value !== 'object') {
			return false;
		}

		var descriptor = gOPD(value, 'lastIndex');
<<<<<<< HEAD
		var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
=======
		var hasLastIndexDataProperty = descriptor && hasOwnProperty(descriptor, 'value');
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
		if (!hasLastIndexDataProperty) {
			return false;
		}

		try {
<<<<<<< HEAD
			$exec(value, badStringifier);
=======
			regexExec(value, badStringifier);
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
		} catch (e) {
			return e === isRegexMarker;
		}
	}
	: function isRegex(value) {
		// In older browsers, typeof regex incorrectly returns 'function'
		if (!value || (typeof value !== 'object' && typeof value !== 'function')) {
			return false;
		}

<<<<<<< HEAD
		return $toString(value) === regexClass;
=======
		return toStr.call(value) === regexClass;
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
	};
