{"ast":null,"code":"var _jsxFileName = \"E:\\\\Repaldo\\\\Univalle\\\\Ingenieria\\\\Semestre 12\\\\SaaS\\\\Proyecto\\\\proyectoFinalFrontEnd\\\\src\\\\pages\\\\Rol\\\\createRol.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport '../Login/login';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialFieldValues = {\n  ID_ROL: '',\n  NOMBRE_ROL: '',\n  TIPO_ROL: ''\n};\nexport default function CreateRol() {\n  _s();\n\n  const [values, setValues] = useState(initialFieldValues);\n  const [NOMBRE_ROL, SetNOMBRE_ROL] = useState('');\n  const [TIPO_ROL, SetTIPO_ROL] = useState('');\n  const url = window.location.href;\n  const navigator = useHistory();\n  let crear = false;\n\n  if (url.includes('crear/Rol')) {\n    crear = true;\n  } else {\n    crear = false;\n    const datosRoles = JSON.parse(sessionStorage.getItem('rol'));\n    const valores = JSON.parse(sessionStorage.getItem('login'));\n    const token = valores.datos.token;\n    fetch('http://localhost:5000/roles/' + datosRoles.datos.id_rol, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-access-token': token\n      }\n    }).then(respuesta => {\n      respuesta.json().then(result => {\n        if (result.Auth) {\n          values.NOMBRE_ROL = result.datos.nombre_rol;\n          values.TIPO_ROL = result.datos.tipo_rol;\n        } else {\n          if (!result.token) {\n            navigator.push('/login');\n            alert(\"El tiempo de sesion expiro\");\n          } else {\n            alert(result.done);\n          }\n        }\n      });\n    });\n  }\n\n  const handleSubmitActualizar = e => {\n    e.preventDefault();\n    const datosRoles = JSON.parse(sessionStorage.getItem('rol'));\n    const valores = JSON.parse(sessionStorage.getItem('login'));\n    const token = valores.datos.token;\n    const data = {\n      id_rol: datosRoles.datos.id_rol,\n      nombre_rol: document.getElementById('nombre_rol').value,\n      tipo_rol: document.getElementById('tipo_rol').value\n    };\n    fetch('http://localhost:5000/roles/update/' + data.id_rol, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        'x-access-token': token\n      }\n    }).then(respuesta => {\n      respuesta.json().then(result => {\n        console.log(result);\n\n        if (result.Auth) {\n          alert(result.done);\n          sessionStorage.removeItem('rol');\n          sessionStorage.setItem('rol', JSON.stringify({\n            datos: data\n          }));\n          navigator.push('/datos/Rol');\n        } else {\n          if (!result.token) {\n            navigator.push('/login');\n            alert(\"El tiempo de sesion expiro\");\n          } else {\n            alert(result.done);\n          }\n        }\n      });\n    });\n  };\n\n  const HandleSubmitCrear = e => {\n    e.preventDefault();\n    const valores = JSON.parse(sessionStorage.getItem('login'));\n    const userID = valores.datos.id;\n    const token = valores.datos.token;\n    const data = {\n      NOMBRE_ROL: document.getElementById('nombre_rol').value,\n      TIPO_ROL: document.getElementById('tipo_rol').value\n    };\n    fetch('http://localhost:5000/roles/agregar', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        'x-access-token': token\n      }\n    }).then(respuesta => {\n      respuesta.json().then(result => {\n        if (result.Auth) {\n          alert(result.done);\n          navigator.push('/dashboard/overview');\n        } else {\n          alert(result.done);\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper fadeInDown\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"formContent\",\n      className: \"editarUsuario\",\n      children: [crear ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Helmet, {\n          children: /*#__PURE__*/_jsxDEV(\"title\", {\n            children: \"Nuevo Rol\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"titulo\",\n          children: \"Formulario de ingreso de Rol\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Helmet, {\n          children: /*#__PURE__*/_jsxDEV(\"title\", {\n            children: \"Editar Rol\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"titulo\",\n          children: \"Editar Rol\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"row g-3 formulario\",\n        autoComplete: \"off\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label col-sm-4 labelForm\",\n          children: \"Nombre de Rol\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 listaOpciones\",\n          children: crear ? /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => SetNOMBRE_ROL(e.target.value),\n            value: NOMBRE_ROL,\n            type: \"text\",\n            className: \"form-control\",\n            id: \"nombre_rol\",\n            placeholder: \"Nombre rol\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setValues({\n              NOMBRE_ROL: e.target.value\n            }),\n            value: values.NOMBRE_ROL,\n            type: \"text\",\n            className: \"form-control\",\n            id: \"nombre_rol\",\n            placeholder: \"Nombre rol\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label col-sm-4 labelForm\",\n          children: \"Tipo de Rol\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 listaOpciones\",\n          children: crear ? /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => SetTIPO_ROL(e.target.value),\n            value: TIPO_ROL,\n            type: \"text\",\n            className: \"form-control\",\n            id: \"tipo_rol\",\n            placeholder: \"Tipo rol\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setValues({\n              TIPO_ROL: e.target.value\n            }),\n            value: values.TIPO_ROL,\n            type: \"text\",\n            className: \"form-control\",\n            id: \"tipo_rol\",\n            placeholder: \"Tipo rol\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 divBoton\",\n          children: crear ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary boton \",\n            type: \"submit\",\n            onClickCapture: HandleSubmitCrear,\n            children: \"Crear Rol\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary boton \",\n            type: \"submit\",\n            onClickCapture: handleSubmitActualizar,\n            children: \"Actualizar Rol\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateRol, \"09Bi7PybZjmTyb2pQ4j9XIQe9EQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = CreateRol;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateRol\");","map":{"version":3,"sources":["E:/Repaldo/Univalle/Ingenieria/Semestre 12/SaaS/Proyecto/proyectoFinalFrontEnd/src/pages/Rol/createRol.js"],"names":["React","useState","useHistory","Helmet","initialFieldValues","ID_ROL","NOMBRE_ROL","TIPO_ROL","CreateRol","values","setValues","SetNOMBRE_ROL","SetTIPO_ROL","url","window","location","href","navigator","crear","includes","datosRoles","JSON","parse","sessionStorage","getItem","valores","token","datos","fetch","id_rol","method","headers","then","respuesta","json","result","Auth","nombre_rol","tipo_rol","push","alert","done","handleSubmitActualizar","e","preventDefault","data","document","getElementById","value","body","stringify","console","log","removeItem","setItem","HandleSubmitCrear","userID","id","target"],"mappings":"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","sourcesContent":["\r\nimport React, {useState} from 'react'\r\nimport {useHistory} from 'react-router-dom'\r\nimport {Helmet} from 'react-helmet';\r\n\r\nimport '../Login/login'\r\n\r\n\r\nconst initialFieldValues = \r\n{\r\n    ID_ROL:'',\r\n    NOMBRE_ROL:'',\r\n    TIPO_ROL:''\r\n}\r\n\r\n\r\nexport default function CreateRol (){\r\n\r\n\r\n    const [values, setValues] = useState(initialFieldValues);\r\n\r\n    const [NOMBRE_ROL,  SetNOMBRE_ROL] = useState('');\r\n    const [TIPO_ROL, SetTIPO_ROL] = useState('');\r\n\r\n    \r\n    const   url = window.location.href;\r\n    const navigator = useHistory();\r\n    let crear = false;\r\n\r\n\r\n    if(url.includes('crear/Rol'))\r\n    {\r\n        crear = true\r\n    }\r\n    else\r\n    {\r\n        \r\n        crear = false;\r\n\r\n        const datosRoles = JSON.parse(sessionStorage.getItem('rol'));\r\n\r\n        const valores =  JSON.parse(sessionStorage.getItem('login'));\r\n        const token = valores.datos.token;\r\n\r\n        fetch('http://localhost:5000/roles/' + datosRoles.datos.id_rol, {\r\n            method: 'GET',\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                'x-access-token': token\r\n            }\r\n        }).then((respuesta) => {\r\n            respuesta.json().then((result) => {\r\n                if(result.Auth)\r\n                {         \r\n                    values.NOMBRE_ROL = result.datos.nombre_rol;\r\n                    values.TIPO_ROL = result.datos.tipo_rol;\r\n                }\r\n                else\r\n                {\r\n                    if(!result.token)\r\n                    {\r\n                        navigator.push('/login');\r\n                        alert(\"El tiempo de sesion expiro\");\r\n                    }\r\n                    else\r\n                    {\r\n                        alert(result.done);\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n    \r\n    const handleSubmitActualizar = (e) =>\r\n    {\r\n        e.preventDefault();\r\n\r\n        const datosRoles = JSON.parse(sessionStorage.getItem('rol'));\r\n\r\n        const valores = JSON.parse(sessionStorage.getItem('login'));\r\n        const token = valores.datos.token;\r\n        \r\n        const data = {\r\n            id_rol: datosRoles.datos.id_rol,\r\n            nombre_rol: document.getElementById('nombre_rol').value,\r\n            tipo_rol: document.getElementById('tipo_rol').value,\r\n        };\r\n        \r\n        \r\n        \r\n        fetch(('http://localhost:5000/roles/update/' + data.id_rol) ,{\r\n            method:'POST',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-access-token': token\r\n            }\r\n        }).then((respuesta) => {\r\n            respuesta.json().then((result) => {\r\n                console.log(result)\r\n                \r\n                if(result.Auth)\r\n                {\r\n                    alert(result.done);\r\n                    sessionStorage.removeItem('rol');\r\n                    sessionStorage.setItem('rol', JSON.stringify({\r\n                        datos: data\r\n                    }));\r\n                    navigator.push('/datos/Rol');\r\n                }\r\n                else\r\n                {\r\n                    if(!result.token)\r\n                    {\r\n                        navigator.push('/login');\r\n                        alert(\"El tiempo de sesion expiro\");\r\n                    }\r\n                    else\r\n                    {\r\n                        alert(result.done);\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    const HandleSubmitCrear = (e) => {\r\n        e.preventDefault();\r\n        \r\n        const valores = JSON.parse(sessionStorage.getItem('login'));\r\n        const userID = valores.datos.id;\r\n        const token = valores.datos.token;\r\n\r\n        const data = {\r\n            NOMBRE_ROL: document.getElementById('nombre_rol').value,\r\n            TIPO_ROL: document.getElementById('tipo_rol').value,\r\n        };\r\n\r\n        fetch('http://localhost:5000/roles/agregar',{\r\n            method:'POST',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-access-token': token\r\n            }\r\n        }).then((respuesta) => {\r\n            respuesta.json().then((result) => {\r\n                if(result.Auth)\r\n                {\r\n                    alert(result.done);\r\n                    navigator.push('/dashboard/overview');\r\n                }\r\n                else\r\n                {\r\n                    alert(result.done);\r\n                }\r\n            \r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"wrapper fadeInDown\">\r\n            <div id=\"formContent\" className=\"editarUsuario\">\r\n                {crear ?\r\n                    <>\r\n                        <Helmet>\r\n                            <title>Nuevo Rol</title>\r\n                        </Helmet>\r\n                        <h2 className='titulo'>Formulario de ingreso de Rol</h2>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <Helmet>\r\n                            <title>Editar Rol</title>\r\n                        </Helmet>\r\n                        <h2 className='titulo'>Editar Rol</h2>\r\n                    </>\r\n                }\r\n                <form className=\"row g-3 formulario\" autoComplete=\"off\" >\r\n\r\n                    <label className=\"form-label col-sm-4 labelForm\">Nombre de Rol</label>\r\n                    <div className=\"col-md-8 listaOpciones\">\r\n                        {crear ?\r\n                            <input onChange={(e) => SetNOMBRE_ROL(e.target.value)} value={NOMBRE_ROL}  \r\n                                type=\"text\" className=\"form-control\" id=\"nombre_rol\" placeholder=\"Nombre rol\" required/>\r\n                            :<input onChange={(e) => setValues(\r\n                                {\r\n                                    NOMBRE_ROL:e.target.value,\r\n                                }\r\n                            )} value={values.NOMBRE_ROL} type=\"text\" className=\"form-control\" id=\"nombre_rol\" placeholder=\"Nombre rol\" required />\r\n                        }\r\n                    </div>\r\n\r\n                    <label className=\"form-label col-sm-4 labelForm\">Tipo de Rol</label>\r\n                    <div className=\"col-md-8 listaOpciones\">\r\n                        {crear ?\r\n                            <input onChange={(e) => SetTIPO_ROL(e.target.value)} value={TIPO_ROL}  \r\n                                type=\"text\" className=\"form-control\" id=\"tipo_rol\" placeholder=\"Tipo rol\" required/>\r\n                            :<input onChange={(e) => setValues(\r\n                                {\r\n                                    TIPO_ROL:e.target.value,\r\n                                }\r\n                            )} value={values.TIPO_ROL} type=\"text\" className=\"form-control\" id=\"tipo_rol\" placeholder=\"Tipo rol\" required />\r\n                        } \r\n                    </div>\r\n                                                    \r\n                    <div className=\"col-12 divBoton\">\r\n                    {\r\n                        crear?\r\n                        <button className=\"btn btn-primary boton \" type=\"submit\"  onClickCapture={HandleSubmitCrear}>Crear Rol</button>\r\n                        :<button className=\"btn btn-primary boton \" type=\"submit\"  onClickCapture={handleSubmitActualizar}>Actualizar Rol</button>\r\n                    }\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}