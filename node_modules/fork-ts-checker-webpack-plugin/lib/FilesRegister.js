"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
<<<<<<< HEAD
class FilesRegister {
    constructor(dataFactory) {
=======
var FilesRegister = /** @class */ (function () {
    function FilesRegister(dataFactory) {
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
        this.dataFactory = dataFactory;
        this.files = {};
        this.dataFactory = dataFactory;
    }
<<<<<<< HEAD
    keys() {
        return Object.keys(this.files);
    }
    add(filePath) {
=======
    FilesRegister.prototype.keys = function () {
        return Object.keys(this.files);
    };
    FilesRegister.prototype.add = function (filePath) {
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
        this.files[filePath] = {
            mtime: undefined,
            data: this.dataFactory(undefined)
        };
<<<<<<< HEAD
    }
    remove(filePath) {
        if (this.has(filePath)) {
            delete this.files[filePath];
        }
    }
    has(filePath) {
        return this.files.hasOwnProperty(filePath);
    }
    get(filePath) {
=======
    };
    FilesRegister.prototype.remove = function (filePath) {
        if (this.has(filePath)) {
            delete this.files[filePath];
        }
    };
    FilesRegister.prototype.has = function (filePath) {
        return this.files.hasOwnProperty(filePath);
    };
    FilesRegister.prototype.get = function (filePath) {
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
        if (!this.has(filePath)) {
            throw new Error('File "' + filePath + '" not found in register.');
        }
        return this.files[filePath];
<<<<<<< HEAD
    }
    ensure(filePath) {
        if (!this.has(filePath)) {
            this.add(filePath);
        }
    }
    getData(filePath) {
        return this.get(filePath).data;
    }
    mutateData(filePath, mutator) {
        this.ensure(filePath);
        mutator(this.files[filePath].data);
    }
    getMtime(filePath) {
        return this.get(filePath).mtime;
    }
    setMtime(filePath, mtime) {
=======
    };
    FilesRegister.prototype.ensure = function (filePath) {
        if (!this.has(filePath)) {
            this.add(filePath);
        }
    };
    FilesRegister.prototype.getData = function (filePath) {
        return this.get(filePath).data;
    };
    FilesRegister.prototype.mutateData = function (filePath, mutator) {
        this.ensure(filePath);
        mutator(this.files[filePath].data);
    };
    FilesRegister.prototype.getMtime = function (filePath) {
        return this.get(filePath).mtime;
    };
    FilesRegister.prototype.setMtime = function (filePath, mtime) {
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
        this.ensure(filePath);
        if (this.files[filePath].mtime !== mtime) {
            this.files[filePath].mtime = mtime;
            // file has been changed - we have to reset data
            this.files[filePath].data = this.dataFactory(this.files[filePath].data);
        }
<<<<<<< HEAD
    }
}
=======
    };
    return FilesRegister;
}());
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
exports.FilesRegister = FilesRegister;
//# sourceMappingURL=FilesRegister.js.map