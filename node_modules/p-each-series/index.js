'use strict';
<<<<<<< HEAD
const pReduce = require('p-reduce');

module.exports = (iterable, iterator) => pReduce(iterable, (a, b, i) => iterator(b, i)).then(() => iterable);
=======

const pEachSeries = async (iterable, iterator) => {
	let index = 0;

	for (const value of iterable) {
		// eslint-disable-next-line no-await-in-loop
		const returnValue = await iterator(await value, index++);

		if (returnValue === pEachSeries.stop) {
			break;
		}
	}

	return iterable;
};

pEachSeries.stop = Symbol('pEachSeries.stop');

module.exports = pEachSeries;
// TODO: Remove this for the next major release
module.exports.default = pEachSeries;
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
