// @flow
import type { Rect } from '../types';
import getDocumentElement from './getDocumentElement';
import getComputedStyle from './getComputedStyle';
import getWindowScrollBarX from './getWindowScrollBarX';
import getWindowScroll from './getWindowScroll';
<<<<<<< HEAD
import { max } from '../utils/math';
=======
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f

// Gets the entire size of the scrollable document area, even extending outside
// of the `<html>` and `<body>` rect bounds if horizontally scrollable
export default function getDocumentRect(element: HTMLElement): Rect {
  const html = getDocumentElement(element);
  const winScroll = getWindowScroll(element);
<<<<<<< HEAD
  const body = element.ownerDocument?.body;

  const width = max(
=======
  const body = element.ownerDocument.body;

  const width = Math.max(
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
    html.scrollWidth,
    html.clientWidth,
    body ? body.scrollWidth : 0,
    body ? body.clientWidth : 0
  );
<<<<<<< HEAD
  const height = max(
=======
  const height = Math.max(
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
    html.scrollHeight,
    html.clientHeight,
    body ? body.scrollHeight : 0,
    body ? body.clientHeight : 0
  );

  let x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  const y = -winScroll.scrollTop;

  if (getComputedStyle(body || html).direction === 'rtl') {
<<<<<<< HEAD
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
=======
    x += Math.max(html.clientWidth, body ? body.clientWidth : 0) - width;
>>>>>>> b459a022f47e1c55fb538e6c6b01f47908ccd92f
  }

  return { width, height, x, y };
}
